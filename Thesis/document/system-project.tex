\chapter{Projekt systemu (TODO)}
Tutaj będzie cały formalny projekt systemu, który wykonam.

Przy okazji napiszę też jakich licencji i technik (Test Driven, Spike) użyję.

Właściwie formalny projekt może się wiązać w wykonaniem prototypu, czyli Spike'a. 

%Tutaj cały czas teorie, ale już wiadomo na czym się skupić. Wiem, jaki chcę zrobić system, teraz muszę go zaprojektować.
%
%Jakiej licencji użyję?
%
%Jak się decydowałem na licencję, narzędzia, repozytorium.
%Założyłem repozytorium na GitHubie, którego znam. Jest sławny i wygodny w użyciu. Kod ma być publiczny, więc nie mam problemu. Wybrałem MIT license (sam przeczytałem licencje, a porównanie tutaj http://choosealicense.com/licenses/). Jest przeciwnikiem skomplikowanych przepisów, na które Apache (główny konkurent) zakrawa, a na patentach mi nie zależy (wątpię, żebym jakieś tu miał, poza tym w UE nie można patentować kodu, chyba). MIT jest proste, zapewnia wzmiankowanie mojego nazwiska i umożliwia używanie mojego kodu także w komercyjnych rozwiązaniach.
%
%Dodać objaśnienia metodyki, którą wytwarzam:
%Robienie prototypów elementarnych funkcjonalności (to się nazywa Spike w Extreme Programming, bodajże i ma za zadanie właśnie sprawdzić czy coś się da zrobić oraz jakie elementy będzie musiało zawierać rozwiązanie), projekt, testy, implementacja. Powiedzieć o Test Driven Development i Extreme Programming.

%Budowa powinna pozwolić na łatwe podłączenie warstwy bezpieczeństwa (bezpiecznego kanału)
%
%Call:
%- id obiektu (0 dla tworzenia nowego, wtedy argumentem jest tym)
%- id metody
%- parametry
%
%Response:
%- czy sie udalo
%- obiekt zwrotny, opis błędu przy wywołaniu zdalnej metody lub stacktrace z exceptiona, który wystąpił w metodzie
%
%Id metody:
%składa się z nazwy i aliasów jej parametrów.
%
%Alias:
%typy prymitywne - int, string, itp.
%datacontract - sraka:\#ptaka.daka
%lista - List
%tablica - [int, [[int, [sraka:\#ptaka.daka, itp.
%
%Tłumaczenie aliasów:
%C\# tłumaczy klasy na aliasy, jak przetłumaczy dla jednej metody to dodaje to do słownika, żeby potem robić to od razu.
%Java tłumaczy aliasy na nazwy klas (potem loaderem). Wiąże w słowniku id metody z obiektem metody. Może być metoda przyjmująca jakiś konkretny List, np. ArrayList, ale nie może mieć overloada przyjmującego inny List.
%Kiedy czyścić te słowniki?
%
%Loader:
%Loaduje aliasy DataContractów, klasy javowe, klasy serwisów(?). Czyta sobie jary, szuka adnotacji
%
%Typy danych i serwisy w javie są oznaczone namespaceami, odpowiadających im rzeczy z C\# (DataContracty i interfejsy)
%
%Oddzielić abstrakcje od sposobu transportu. Wyróżnic transport streamowany (serializator dostaje strumień i na niego wali output, możemy tłumaczyć i wysyłać na raz) i nie (trzeba stworzyć całą wiadomość, wtedy wysłać).
%
%Zrobić timeouty na łączenie do serwisu i na operacje. Poczytać więcej o TCP, zobaczyć, czy dobrze można nim sprawdzać, czy trzeba używać PINGa.
%
%Serializujemy wszystkie publiczne pola/ propertiesy albo metody z get / set (to w Javie). Używać jakiś dostępnych już atrybutów do ręcznej konfiguracji wyboru serializowanych elementów.

%Unittesty wywoływania w obrębie jednej aplikacji z kilkoma wątkami - jako kanał komunikacji strumień w pamięci.

%W generację WSDLa nie chcę się babrać - skomplikowane. A WADL nie jest tak potrzebny, bo REST może bez niego żyć. Chociaż, kurde, moje to będzie w sumie RPC z JSONem.

%\section{Moje pomysły na rozwiązanie}
%Chyba moje rozwiązanie będzie RPC z JSONem. Nie mogę się ograniczać do HTTP, bo chcę wspierać wiele transportów. Poza tym parsowanie adresów jest bardziej problematyczne niż proste pobieranie nazw.
%
%Wymienić, zrobić POCe, porównać, wybrać i uzasadnić wybór. Wypracować jaką metodę odcięcia pracy na POCem? Że jak będę widział, że da się coś zrobić, ale jest to za trudne to kończyć pracę.
%
%Namespace'y są ważną rzeczą w SOAPie. Ja twierdzę, że nie są potrzebne w tak rozbudowanej formie. Może być jedno standardowe nazewnictwo z kropkami. Zakładam taki jakby jeden globalny namespace na oba runtime'y (klient i serwer). Fakt, że nawet jedna strona może mieć kilka przestrzeni nazw (parę class loaderów albo assembly cache'y) ale nie chcę tego robić z uwagi n utrudnienia w integracji (tu można napisać jakby to mogło wyglądać, ale nie trzeba, mogę po prostu to olać).
%
%Napisanie wszystkiego w C, Javie albo nawet Pythonie. Z czym by się to wiązało. Chcemy żeby było łatwo, co by trzeba było zrobić wtedy?
%Podłączanie się pod istniejące rozwiązania Axis w C, portowanie Pythona, tłumaczenie JibXem
%
%Zdecydowałem się to zrobić web servicami opartymi o SOAP, blabla, jednolite dla javy tej i normalnej
%Tu już konkretnie jakie biblioteki, jak konkretniej to będzie wyglądać
%
%Tyson? Typed JSON?
%
%a)	Rozpoznanie istniejących rozwiązań dotyczących wiązania danych (ang. data binding) z XML oraz wystawiania usług sieciowych (ang. web services) w językach Java oraz C++.
%Zaprojektowanie i wykonanie biblioteki pozwalającej na przyjmowanie, przetwarzanie, tworzenie i wysyłanie wiadomości SOAP, generowanie plików WSDL na bazie kodu oraz na wiązanie danych z języka C\# do języka Java z zakresem bibliotek dostępnym na Androidzie. Akceptowalne jest również stworzenie biblioteki, w której komunikacja oparta zostałaby o protokół TCP/IP i serializację obiektów do XML tak, by były rozumiane zarówno przez kod w języku Java, jak i w języku C\#.
%
%Użyć w Pythonie Flaska do tłumaczenia JSONa? Albo jakiegoś innego tłumacza python-JSON.
%
%Może zamiast tylu podsekcji najpierw wyliczenie, krótki opis i decyzja, czy należy się tym zajmować? Dopiero te, które wydawałyby się bardziej interesujące dostają swoją własną podsekcję.
%
%\subsection{własna metoda oparta o JSON z oznaczaniem typów}
%Póki co wiem, że będzie JSON z opisanymi typami. Kanał komunikacyjny powinien być dowolny. 
%
%Może zamiast równoważnych implementacji na pythona, C\# i javę zrobić tylko pythona i wrappery w jythonie i iron pythonie?
%
%\subsection{serwer web serviców z narzędziami do generacji kodu itp}
%Generator wsdl na Androida + tworzenie bindingów do xsd + Parsowanie SOAPów
%
%JiBX!!! Tworzenie klas ze schemy i robienie wsdl z javy
%Wsdl2Java: tworzenie klas z wsdl, głównie chodzi o klasy danych
%
%Weryfikacja: tworzę graf w xmlu. Są obiekty, które mogą mieć dzieci (tablice, listy). Próbuję wygenerować C\# dla porównania. Zapisuję grafy, które nie działają (w trakcie automatycznych testów). Zrobić wizualizator grafów.
%
%Co by trzeba było po kolei zrobić w normalnej javie? (tłumaczenia do xsd, ujednolicanie namespaców, mamy do czynienia z jakimiś ArrayOfString, dziedziczenie chyba słabo działa przy generacji, nie da się używać DataContractSerializera żeby nie serializować części klas ogólnie syf, ale wszystko udokumentować). 
%
%\subsection{Własny serwer REST}
%Tu dyskusja o implementacji serwera RESTowego na Androidzie \url{https://groups.google.com/forum/?fromgroups=#!topic/android-developers/vgkXg1P8iBg}
%
%\subsection{remoting przez serializację}
%Po prostu serializujemy tak samo/
%
%\subsection{portowanie rozwiązań w C na Androida?}
%Axis. Może częściowe używanie go spod javy. W sumie można sportować też jakieś inne rzeczy. Np.\ pythonowe web service'y (pyro, twisted).
%
%Sprawdzić Python Remote Objects (Pyro) na pythonie 2, 3 (też na warstwie skryptowej Androida). Porównać z Twistedem, napisać o próbach portowania wymaganych bibliotek w C na Androida. \url{http://pythonhosted.org/Pyro4/intro.html#performance}
%
%sl4a, py4a, kompilacja na ubuntu z użyciem NDK i Cythona
%distutils.core zamienić na setuptools w setup.py
%
%\subsection{Zcentralizowane pseudo web servicy (albo nawet i nie)}
%Też potrzebny serializator / deserializator + bindingi. To był ten pomysł, że to komp pinga serwer (Androida), żeby ten sobie pobrał rozkaz i to Android woła web service na kompie. Trzeba by było używać Ksoap albo innego ścierwa. Zobaczyć, czy to w ogóle miałoby sens. Czy tymi Ksoapami da się coś sensownie zrobić.

\section{Wybór rozwiazania}
Jakie miałem pomysły na rozwiązanie? Co w końcu wybrałem i dlaczego?

%Jak w ogóle dojść do tego  co i jak zrobić, żeby dało nam to, co mamy w celach? Jak się odnaleźć w tym wszystkim?
%Wyjaśnić jak wytaczałem sobie drogę działania i jak metodyki dobierałem
%
%Jak teoretycznie możnaby zrobić web service'y na Androidzie? Android jest tutaj przykładem ograniczonego systemu.
%W sumie jakiś powód musięli mieć, żeby ich nie zamieszać. Jakie jeszcze dodatkowe usprawnienia byłyby do zrobienia (tłumaczenie klas)?
%
%Napisać, co jest potrzebne dla remotingu: jakaś tożsamość, adres obiektu, oznaczenia metod, argumentów.
%
%Wprowadzenie nowego standardu nie jest dobrą rzeczą, chyba, że ma się ogromną rzeszę zwolenników lub poważne przesłanki. Kto wie, może takie mam. Ale na ogół lepiej kombinować istniejące rozwiązania tak, żeby zewnętrzne komponenty miały szansę na współpracę z nimi.
%
%Przejrzeć specyfikację, zobaczyć, z czym musieli sobie poradzić i wyczaić jak to wszystko mozna odwzorować w JSONie. Obczaić, jak sobie DataContractSerializer (też DataContractJsonSerializer) radzą.

\section{Specyfikacja wymagań systemowych}
Jakie dokładnie stawiam sobie cele po dokładnym przyjrzeniu się istniejącym rozwiązaniom?

Czy cele wyznaczone na początku pracy są niezmienione? Na ich podstawie stworzyć konkretnie wymagania na system.

%Wymienić te wszystkie typy wymagań i wylistować.
%
%reliable sessions (w sumie też by mi się przydał jakiś mechanizm, który umożliwi komunikację w niestabilnym środowisku Internetu)

\section{Przypadki użycia}
Jakie są? Do czego można użyć tego systemu? Jak to jest z tym dynamicznym tworzeniem web serviceów z hierarchii klas?

\section{Struktura projektu}
Diagramy warstwowe, komponentowe, klas.

\section{Schemat działanie projektu}
Schematy działania, to z liniami życia itp.

\section{Plan testów}
Jakie testy akceptacyjne? Jak sprawdzę (lub sprawdziłem), że działa? Na jakiej konfiguracji sprzętowej będę musiał to robić?